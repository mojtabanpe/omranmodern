<div class="section p-0">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/modern/dashboard">عمران مدرن</a></li>
      <li class="breadcrumb-item active">کالاها</li>
      <li class="breadcrumb-item active" aria-current="page">مدیریت کالاها</li>
    </ol>
  </nav>
</div>

<div class="d-flex justify-content-between">
  <h3>لیست کالاها</h3>
  <button routerLink="/modern/create_material" class="btn btn-info d-flex align-items-center btn-sm">
    <mat-icon>add</mat-icon>
    <a class="text-white">افزودن کالای جدید</a>
  </button>
</div>

<div class="section d-flex py-2 mt-5">
  <div class="d-flex align-items-center">
    <mat-icon>sort</mat-icon>
    <h3 class="mb-0 mr-1">مرتب سازی بر اساس</h3>
  </div>
  <div class="mr-5">
    <button class="btn btn-info btn-sm mx-1">جدیدترین</button>
    <button class="btn btn-info btn-sm mx-1">قدیمی ترین</button>
    <button class="btn btn-info btn-sm mx-1">حروف الفبا</button>
  </div>
</div>

<div class="section">
  <div class="section-gray mb-5 d-flex">
    <mat-radio-group [(ngModel)]="selectedStatus" (change)="activityChanged()">
      <mat-radio-button *ngFor="let item of statuses" [value]="item.value">
        {{item.viewValue}}
      </mat-radio-button>
    </mat-radio-group>
    <mat-slide-toggle class="mr-auto" checked="false" (change)="chageTableMode()"><span class="mr-1">کالاهای مادر</span></mat-slide-toggle>
  </div>
  <h3 class="text-secondary">جستجو بر اساس عنوان</h3>
  <div class="section-gray mb-5">
    <div class="input-group">
      <div class="input-group-prepend">
        <button class="btn btn-info input-group-text"><mat-icon>search</mat-icon></button>
      </div>
      <input type="text" class="form-control"  aria-label="Username" aria-describedby="basic-addon1">
    </div>
  </div>

  <table class="my-table" *ngIf="tableMode">
    <thead class="my-thead">
      <tr>
        <th class="first-th">کالاهای من</th>
        <th>عنوان</th>
        <th>گروه</th>
        <th>کالاهای مادر</th>
        <th *ngIf="selectedStatus == 'active'">تعداد فروشنده ها</th>
        <th>عملیات</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let material of materials" class="my-tr">
        <td class="first-td">
          <img src={{material.images}} alt="">
        </td>
        <td><a routerLink="/modern/edit_material/{{material.id}}">{{material.name}}</a></td>
        <td><a routerLink="/modern/create_edit_category/{{material.category.id}}">{{material.category.name}}</a></td>
        <td>
          <div class="d-flex flex-column align-items-center">
            <p *ngFor="let mother of material.mothers"><a routerLink="/modern/edit_mother_material/{{mother.id}}">{{mother.name}}</a></p>
          </div>
        </td>
        <td *ngIf="selectedStatus == 'active'">
          <p *ngIf="material.sellers_list.length == 0">فروشنده ای ندارد</p>
          <p *ngIf="material.sellers_list.length != 0"><a routerLink="/modern/sellers-of-material/{{material.id}}">مشاهده {{material.sellers_list.length}} فروشنده</a></p>
        </td>
        <td>
          <mat-icon routerLink="/modern/edit_material/{{material.id}}" class="text-warning">edit</mat-icon>
          <mat-icon (click)="openAggrementDeleteMaterialDialog(material, 'child')" class="text-danger">delete</mat-icon>
        </td>
      </tr>
    </tbody>
  </table>

  <table class="my-table" *ngIf="!tableMode">
    <thead class="my-thead">
      <tr>
        <th class="first-th">کالای مادر</th>
        <th>عنوان</th>
        <th>گروه</th>
        <th>فرزندها</th>
        <th>عملیات</th>
      </tr>
    </thead>
    <tbody *ngIf="initialized">
      <tr *ngFor="let material of motherMaterials" class="my-tr">
        <td class="first-td">
          <img src={{material.images}} alt="">
        </td>
        <td><a routerLink="/modern/edit_mother_material/{{material.id}}">{{material.name}}</a></td>
        <td><a routerLink="/modern/create_edit_category/{{material.category?.id}}">{{material.category?.name}}</a></td>
        <td>
          <p *ngIf="material.materials_list.length == 0">فرزندی ندارد</p>
          <p *ngIf="material.materials_list.length != 0"><a routerLink="/modern/sellers-of-mother-material/{{material.id}}">مشاهده {{material.materials_list.length}} فرزند</a></p>
        </td>
        <td>
          <mat-icon routerLink="/modern/edit_mother_material/{{material.id}}" class="text-warning">edit</mat-icon>
          <mat-icon (click)="openAggrementDeleteMaterialDialog(material,'mother')" class="text-danger">delete</mat-icon>
        </td>
      </tr>
    </tbody>
  </table>
</div>